# Basic BASIC

–û—Ç –Ω–æ—Å—Ç–∞–ª–≥–∏—è –∑–∞ –ø–æ-—Å—Ç–∞—Ä–∏, –ø–æ-–ø—Ä–æ—Å—Ç–∏ –µ–∑–∏—Ü–∏, —â–µ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–∞–º–µ –Ω–∞—à —Å–∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä –∑–∞ –Ω–µ—â–æ –∫–∞—Ç–æ –µ–∑–∏–∫–∞ BASIC. –©–µ –∏—Å–∫–∞–º–µ –µ–¥–Ω–∞ –µ–π —Ç–∞–∫–∞–≤–∞ –∏–≥—Ä–∏—á–∫–∞ —Ç–∏–ø "–ø–æ–∑–Ω–∞–π —á–∏—Å–ª–æ—Ç–æ" –¥–∞ —Å—Ä–∞–±–æ—Ç–∏:

```
10 PRINT guess_a_number
20 READ Guess
30 IF Guess > 42 GOTO 100
40 IF Guess < 42 GOTO 200
50 IF Guess = 42 GOTO 300
100 PRINT too_high
110 GOTO 10
200 PRINT too_low
210 GOTO 10
300 PRINT you_got_it!
```

–ê—Ö, —Ç–æ–∑–∏ GOTO, an elegant weapon for a more civilized age! –í—Å–µ –µ–¥–Ω–æ —Å—ä–º –Ω–∞ —Å—Ç–∞—Ä–∏—è –ü—Ä–∞–≤–µ—Ü-8C... Kinda. –ù—è–∫–æ–∏ –Ω–µ—â–∞ –º–æ–∂–µ –¥–∞ –∏–∑–≥–ª–µ–∂–¥–∞—Ç –º–∞–ª–∫–æ —Å—Ç—Ä–∞–Ω–Ω–∏, –Ω–æ —â–µ –∫–∞—Ä–∞–º–µ —Å—Ç—ä–ø–∫–∞ –ø–æ —Å—Ç—ä–ø–∫–∞ –∏ —â–µ –≥–∏ –¥–æ–∏–∑—è—Å–Ω–∏–º.

## –ë–∞–∑–æ–≤–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏

–©–µ –∑–∞–ø–æ—á–Ω–µ–º —Å—ä—Å —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ç–∞ –∑–∞ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞ –∏ –≤—ä–∑–º–æ–∂–Ω–∏—Ç–µ –º—É –≥—Ä–µ—à–∫–∏ (–∫–æ–∏—Ç–æ —â–µ –¥–æ–∏–∑—è—Å–Ω—è–≤–∞–º–µ –ø–æ—Å–ª–µ):

``` rust
use std::io::{self, Write, Read};

#[derive(Debug)]
pub enum InterpreterError {
    IoError(io::Error),
    UnknownVariable { name: String },
    NotANumber { value: String },
    SyntaxError { code: String },
    RuntimeError { line_number: u16, message: String },
}

// –í–ê–ñ–ù–û: —Ç—É–∫ —â–µ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ –¥–æ–±–∞–≤–∏ lifetime –∞–Ω–æ—Ç–∞—Ü–∏—è!
pub struct Interpreter<R: Read, W: Write> {
    // –¢–µ–∑–∏ –ø–æ–ª–µ—Ç–∞ –Ω–µ —Å–∞ –ø—É–±–ª–∏—á–Ω–∏, —Ç–∞–∫–∞ —á–µ –º–æ–∂–µ –¥–∞ —Å–∏ –≥–∏ –ø—Ä–æ–º–µ–Ω–∏—Ç–µ, –∞–∫–æ –∏—Å–∫–∞—Ç–µ:
    input: R,
    output: &mut W,
    // –ö–∞–∫–≤–∏—Ç–æ –¥—Ä—É–≥–∏ –ø–æ–ª–µ—Ç–∞ –≤–∏ —Ç—Ä—è–±–≤–∞—Ç
}

impl<R: Read, W: Write> Interpreter<R, W> {
    /// –ö–æ–Ω—Å—Ç—Ä—É–∏—Ä–∞ –Ω–æ–≤ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä, –∫–æ–π—Ç–æ —á–µ—Ç–µ –≤—Ö–æ–¥ –æ—Ç `input` —á—Ä–µ–∑ `READ` –∫–æ–º–∞–Ω–¥–∞—Ç–∞ –∏ –ø–∏—à–µ –≤
    /// `output` —á—Ä–µ–∑ `PRINT`.
    ///
    pub fn new(input: R, output: &mut W) -> Self {
        todo!()
    }
}
```

–ò–º–∞ –µ–¥–Ω–æ **–≤–∞–∂–Ω–æ** –Ω–µ—â–æ, –∫–æ–µ—Ç–æ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ –æ—Ç–±–µ–ª–µ–∂–∏ —Ç—É–∫ -- –∫–∞–∫—Ç–æ –µ –¥–∞–¥–µ–Ω, –≥–æ—Ä–Ω–∏—è –∫–æ–¥ –∑–∞–ø–∞–∑–≤–∞ `&mut W`, –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ç–∞ `Interpreter` –∏ —Å—ä–æ—Ç–≤–µ—Ç–Ω–æ —Ç—è —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–º–∞ lifetime –∞–Ω–æ—Ç–∞—Ü–∏—è. –¢–æ–≤–∞ –Ω–µ –±–∏ —Ç—Ä—è–±–≤–∞–ª–æ –¥–∞ –µ –æ—Å–æ–±–µ–Ω–æ —Ç—Ä—É–¥–Ω–æ, –Ω–æ –≤—Å–µ –ø–∞–∫ —Ç—Ä—è–±–≤–∞ –¥–∞ –≥–æ –Ω–∞–ø—Ä–∞–≤–∏—Ç–µ, –∏–Ω–∞—á–µ –Ω—è–º–∞ –¥–∞ –≤–∏ —Å–µ –∫–æ–º–ø–∏–ª–∏—Ä–∞ –¥–æ—Ä–∏ –∏ –±–∞–∑–æ–≤–∏—è —Ç–µ—Å—Ç. You have been warned.

–ù–∞–≤—Å—è–∫—ä–¥–µ –Ω–∞–¥–æ–ª—É, –∫—ä–¥–µ—Ç–æ –ø–∏—à–µ–º `impl<R: Read, W: Write> Interpreter<R, W> {`, –ø—Ä–∏–µ–º–µ—Ç–µ, —á–µ —Ç—Ä—è–±–≤–∞ –¥–∞ –ø—Ä–æ–º–µ–Ω–∏—Ç–µ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏—è—Ç–∞ —Å lifetimes, –∫–∞–∫—Ç–æ —Å—Ç–µ —è –ø—Ä–æ–º–µ–Ω–∏–ª–∏ —Ç—É–∫.

–î–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–æ, –∑–∞–±–µ–ª–µ–∂–µ—Ç–µ, —á–µ —Ç–∏–ø–∞ `R` –∏–º–∞ —Å–∞–º–æ `Read` –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ. –û—á–∞–∫–≤–∞–º–µ –¥–∞ —á–µ—Ç–µ—Ç–µ —Ü–µ–ª–∏ —Ä–µ–¥–æ–≤–µ, —Ç–∞–∫–∞ —á–µ —Ç–æ–≤–∞ –º–æ–∂–µ –¥–∞ –µ –¥–æ—Å—Ç–∞ –¥–æ—Å–∞–¥–Ω–æ (–Ω–∞–¥—è–≤–∞–º–µ —Å–µ, —á–µ –µ –æ—á–µ–≤–∏–¥–Ω–æ, –Ω–æ –∞–∫–æ –ø—Ä–æ—Å—Ç–æ —Å–º–µ–Ω–∏—Ç–µ trait constraint-–∞, –¥–æ–º–∞—à–Ω–æ—Ç–æ –Ω—è–º–∞ –¥–∞ —Å–µ –∫–æ–º–ø–∏–ª–∏—Ä–∞). –ù–æ –º–æ–∂–µ –±–∏ –∏–∑ –ª–µ–∫—Ü–∏–∏—Ç–µ —Å–º–µ –≥–æ–≤–æ—Ä–∏–ª–∏ –∑–∞ —Ç–∏–ø –æ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—Ç–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –∫–æ–π—Ç–æ –º–æ–∂–µ –¥–∞ –±—É—Ñ–µ—Ä–∏—Ä–∞ `Read` —Ç–∏–ø–æ–≤–µ –∏ –¥–∞ –≤–∏ –¥–∞–¥–µ –¥–∞ —á–µ—Ç–µ—Ç–µ –ø–æ —Ä–µ–¥–æ–≤–µ?

## –î–æ–±–∞–≤—è–Ω–µ –∏ –ø–∞—Ä—Å–µ–Ω–µ –Ω–∞ —Ä–µ–¥–æ–≤–µ

``` rust
// –ù–µ –∑–∞–±—Ä–∞–≤—è–π—Ç–µ lifetime –∞–Ω–æ—Ç–∞—Ü–∏—è—Ç–∞
impl<R: Read, W: Write> Interpreter<R, W> {
    /// –¢–∞–∑–∏ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤—è —Ä–µ–¥ –∫–æ–¥ –∫—ä–º –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞. –¢–æ–∑–∏ —Ä–µ–¥ —Å–µ –æ—á–∞–∫–≤–∞ –¥–∞ –∑–∞–ø–æ—á–≤–∞ —Å 16-–±–∏—Ç–æ–≤–æ
    /// unsigned —á–∏—Å–ª–æ, –ø–æ—Å–ª–µ–¥–≤–∞–Ω–æ –æ—Ç –Ω—è–∫–∞–∫–≤–∞ –∫–æ–º–∞–Ω–¥–∞ –∏ –Ω–µ–π–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏. –í—Å–∏—á–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –Ω–∞
    /// —Ä–µ–¥–∞ —â–µ –±—ä–¥–∞—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω–∏ —Ç–æ—á–Ω–æ —Å –µ–¥–∏–Ω –∏–Ω—Ç–µ—Ä–≤–∞–ª -- –∏–ª–∏ –ø–æ–Ω–µ —Ç–∞–∫–∞ —â–µ –≥–∏ —Ç–µ—Å—Ç–≤–∞–º–µ.
    ///
    /// –ü—Ä–∏–º–µ—Ä–Ω–∏ —Ä–µ–¥–æ–≤–µ:
    ///
    /// 10 IF 2 > 1 GOTO 30
    /// 20 GOTO 10
    /// 30 READ V
    /// 40 PRINT V
    ///
    /// –í —Å–ª—É—á–∞–π, —á–µ —Ä–µ–¥–∞ –Ω–µ –µ –≤–∞–ª–∏–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ (–¥–µ—Ç–∞–π–ª–∏ –ø–æ-–¥–æ–ª—É), –æ—á–∞–∫–≤–∞–º–µ –¥–∞ –≤—ä—Ä–Ω–µ—Ç–µ
    /// `InterpreterError::SyntaxError` —Å –∫–æ–¥–∞, –∫–æ–π—Ç–æ –µ –±–∏–ª –ø–æ–¥–∞–¥–µ–Ω.
    ///
    pub fn add(&mut self, code: &str) -> Result<(), InterpreterError> {
        todo!()
    }
}
```

–ò–º–∞ 4 –∫–æ–º–∞–Ω–¥–∏, –∫–æ–∏—Ç–æ —â–µ –∏—Å–∫–∞–º–µ –¥–∞ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–∞—Ç–µ. –ö–∞—Ä–∞–º–µ –µ–¥–Ω–∞ –ø–æ –µ–¥–Ω–∞:

- `PRINT <—Å—Ç–æ–π–Ω–æ—Å—Ç>`: –ü—Ä–∏ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ —â–µ –Ω–∞–ø–µ—á–∞—Ç–∞ –¥–∞–¥–µ–Ω–∞—Ç–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç –∏ –Ω–æ–≤ —Ä–µ–¥ (—Å–∏–º–≤–æ–ª `\n`). –ù–µ –µ
  –Ω—É–∂–Ω–æ –¥–∞ –æ–±—Ä–∞–±–æ—Ç–≤–∞—Ç–µ —Å—Ç–æ–π–Ω–æ—Å—Ç—Ç–∞ –ø–æ –≤—Ä–µ–º–µ –Ω–∞ –¥–æ–±–∞–≤—è–Ω–µ -- –º–æ–∂–µ –¥–∞ —è –∑–∞–ø–∞–∑–∏—Ç–µ –∫–∞—Ç–æ –Ω–∏–∑ –∑–∞
  –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –ø–æ—Å–ª–µ. (–ê–∫–æ –∏—Å–∫–∞—Ç–µ –¥–∞ –¥–æ–±–∞–≤–∏—Ç–µ –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è, –Ω—è–º–∞ –¥–∞ –ø–æ–ø—Ä–µ—á–∏ -- —â–µ
  –ø–æ–¥–∞–≤–∞–º–µ –Ω–∞ `PRINT` —Å–∞–º–æ —Å–∏–Ω—Ç–∞–∫—Ç–∏—á–Ω–æ-–≤–∞–ª–∏–¥–Ω–∏ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ –≤ —Ç–µ—Å—Ç–æ–≤–µ—Ç–µ)

- `READ <–∏–º–µ –Ω–∞ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞>`: –ü—Ä–∏ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ, —â–µ –ø—Ä–æ—á–µ—Ç–µ —Ç–æ—á–Ω–æ –µ–¥–∏–Ω —Ä–µ–¥, –ø—Ä–µ–º–∞—Ö–≤–∞–π–∫–∏ –∑–∞–≤—ä—Ä—à–≤–∞—â–∏—è
  `\n` —Å–∏–º–≤–æ–ª. –ò–º–µ—Ç–æ –Ω–∞ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞—Ç–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ –µ –Ω–∏–∑, –∫–æ–π—Ç–æ –∑–∞–ø–æ—á–≤–∞ —Å –≥–ª–∞–≤–Ω–∞ –±—É–∫–≤–∞
  (`char::is_uppercase`), –∏–Ω–∞—á–µ —Ç–∞–∑–∏ –∫–æ–º–∞–Ω–¥–∞ –µ –Ω–µ–≤–∞–ª–∏–¥–Ω–∞ –∏ –æ—á–∞–∫–≤–∞–º–µ –¥–∞ –≤—ä—Ä–Ω–µ—Ç–µ
  `InterpreterError::SyntaxError`. (–î–∞, –Ω–∏–∑–∞ –º–æ–∂–µ –¥–∞ –µ –Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞, —â–µ —Ç–µ—Å—Ç–≤–∞–º–µ —Å –ø—Ä–∏–º–µ—Ä–Ω–æ `READ –©`)

- `GOTO <–Ω–æ–º–µ—Ä –Ω–∞ —Ä–µ–¥>`: –ü—Ä–∏ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ, –ø—Ä–æ–º–µ–Ω—è —Å–ª–µ–¥–≤–∞—â–∏—è —Ä–µ–¥ –∑–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞—Ç–∞ –¥–∞ –±—ä–¥–µ
  –¥–∞–¥–µ–Ω–∏—è —Ä–µ–¥. –†–µ–¥–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ –µ –≤–∞–ª–∏–¥–Ω–æ `u16` —á–∏—Å–ª–æ, –∏–Ω–∞—á–µ –æ—á–∞–∫–≤–∞–º–µ –¥–∞ –≤—ä—Ä–Ω–µ—Ç–µ
  `InterpreterError::SyntaxError`.

- `IF <—Å—Ç–æ–π–Ω–æ—Å—Ç> <–æ–ø–µ—Ä–∞—Ç–æ—Ä> <—Å—Ç–æ–π–Ω–æ—Å—Ç> GOTO <–Ω–æ–º–µ—Ä –Ω–∞ —Ä–µ–¥>`: –ù–∞–π-—Å–ª–æ–∂–Ω–∞—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏—è, –∫–æ—è—Ç–æ —â–µ
  –ø–æ–¥–¥—ä—Ä–∂–∞–º–µ. –ü–æ –≤—Ä–µ–º–µ –Ω–∞ –¥–æ–±–∞–≤—è–Ω–µ –Ω–∞ —Ä–µ–¥–∞, –º–æ–∂–µ –¥–∞ —Å–∏ –∑–∞–ø–∞–∑–∏—Ç–µ `<—Å—Ç–æ–π–Ω–æ—Å—Ç> <–æ–ø–µ—Ä–∞—Ç–æ—Ä> <—Å—Ç–æ–π–Ω–æ—Å—Ç>`
  —á–∞—Å—Ç—Ç–∞ –∫–∞–∫—Ç–æ –≤–∏ –µ —É–¥–æ–±–Ω–æ, –Ω—è–º–∞ –Ω—É–∂–¥–∞ –¥–∞ –≤–∞–ª–∏–¥–∏—Ä–∞—Ç–µ –∫–∞–∫–≤–∏ —Ç–æ—á–Ω–æ –Ω–µ—â–∞ –∏–º–∞ –≤—ä—Ç—Ä–µ. –ù–æ–º–µ—Ä–∞ –Ω–∞ —Ä–µ–¥
  —Ç—Ä—è–±–≤–∞ –¥–∞ –µ –≤–∞–ª–∏–¥–Ω–æ `u16` —á–∏—Å–ª–æ, –∏–Ω–∞—á–µ –æ—á–∞–∫–≤–∞–º–µ –¥–∞ –≤—ä—Ä–Ω–µ—Ç–µ `InterpreterError::SyntaxError`.

–ó–∞ –≤—Å–∏—á–∫–∏ —Ç–µ–∑–∏ –∫–æ–º–∞–Ω–¥–∏, –º–æ–∂–µ –¥–∞ –æ—á–∞–∫–≤–∞—Ç–µ, —á–µ –≤—Å–µ–∫–∏ –µ–¥–∏–Ω –æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–∏—Ç–µ —â–µ –±—ä–¥–µ —Ä–∞–∑–¥–µ–ª–µ–Ω —Å —Ç–æ—á–Ω–æ –µ–¥–∏–Ω –∏–Ω—Ç–µ—Ä–≤–∞–ª. –°–≤–æ–±–æ–¥–Ω–∏ —Å—Ç–µ –¥–∞ –≥–∏ —Ä–∞–∑–±–∏–µ—Ç–µ —Å—ä—Å `.split_whitespace` –∏–ª–∏ –ø–æ –µ–¥–∏–Ω –∏–Ω—Ç–µ—Ä–≤–∞–ª, –≤–∞—à –∏–∑–±–æ—Ä. –í–∏–Ω–∞–≥–∏ —â–µ –∏–∑–ø–æ–ª–∑–≤–∞–º–µ –≥–æ–ª–µ–º–∏ –±—É–∫–≤–∏ –∑–∞ –∫–æ–º–∞–Ω–¥–∏—Ç–µ, —Ç–æ—á–Ω–æ –∫–∞–∫—Ç–æ –≥–∏ –¥–∞–≤–∞–º–µ –≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏—Ç–µ –∏ –≤ –ø—Ä–∏–º–µ—Ä–∏—Ç–µ.

–í—Å–∏—á–∫–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∏ —Å–∞ –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–∏, —Å—ä—â–æ –∏ –Ω–æ–º–µ—Ä –Ω–∞ –≤—Å–µ–∫–∏ —Ä–µ–¥ -- –∞–∫–æ –ª–∏–ø—Å–≤–∞ –∞—Ä–≥—É–º–µ–Ω—Ç, —Ç–æ–≤–∞ –µ `InterpreterError::SyntaxError`, —Å—ä—â–æ –∞–∫–æ –∏–º–∞ —Ç–≤—ä—Ä–¥–µ –º–Ω–æ–≥–æ. –ü—Ä–∏–º–µ—Ä–Ω–æ, —Ç–µ–∑–∏ —Ä–µ–¥–æ–≤–µ —Å–∞ —Å–∏–Ω—Ç–∞–∫—Ç–∏—á–Ω–æ –≥—Ä–µ—à–Ω–∏:

```
10 PRINT A B
20 IF 13 > 18 GOTO
READ X
30
```

–†–µ–¥ 10 –∏–º–∞ —Ç–≤—ä—Ä–¥–µ –º–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏, –∞ –Ω–∞ —Ä–µ–¥ 20 –º—É –ª–∏–ø—Å–≤–∞—Ç. –†–µ–¥ 30 –µ –Ω–∞–ø—ä–ª–Ω–æ –ø—Ä–∞–∑–µ–Ω, –∫–æ–µ—Ç–æ —Å—ä—â–æ –µ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ. –ú–µ–∂–¥—É 20 –∏ 30 –∏–º–∞ —Ä–µ–¥ –±–µ–∑ –Ω–æ–º–µ—Ä, –∫–æ–µ—Ç–æ –µ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ. –ü—Ä–∞–∑–µ–Ω –Ω–∏–∑ —Å—ä—â–æ –Ω–µ –µ –≤–∞–ª–∏–¥–µ–Ω —Ä–µ–¥.

–í –Ω–∞—à–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤–µ —â–µ –ø—Ä–æ–±–≤–∞–º–µ —Å–∞–º–æ –∏ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–æ —Ç–µ–∑–∏ 4 –∫–æ–º–∞–Ω–¥–∏, —Ç–∞–∫–∞ —á–µ –Ω—è–º–∞ –Ω—É–∂–¥–∞ –¥–∞ –≤–∞–ª–∏–¥–∏—Ä–∞—Ç–µ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∏ —Ç–∞–∫–∏–≤–∞, –Ω–æ –º–æ–∂–µ—Ç–µ, –∞–∫–æ –∏—Å–∫–∞—Ç–µ. –ú–æ–∂–µ—Ç–µ –∏ –¥–∞ –¥–æ–±–∞–≤–∏—Ç–µ –≤–∞—à–∏, –≤ —Å–ª—É—á–∞–π —á–µ —É—Å–µ—Ç–∏—Ç–µ –∏–∑–±–ª–∏–∫ –Ω–∞ –µ–Ω—Ç—É—Å–∏–∞–∑—ä–º, –∫–æ–π—Ç–æ –º–æ–∂–µ –¥–∞ –±—ä–¥–µ –ø–æ—Ç—É—à–µ–Ω —Å–∞–º–æ —Å –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ `–ê–ö–û 3 > 2 –•–û–ü 40`. –°–∞–º–æ –≤–Ω–∏–º–∞–≤–∞–π—Ç–µ –¥–∞ –Ω–µ —Å—á—É–ø–∏—Ç–µ —Ç–µ–∑–∏, –∫–æ–∏—Ç–æ –∏—Å–∫–∞–º–µ :) (hint: —Ç–µ—Å—Ç–æ–≤–µ –ø–æ–º–∞–≥–∞—Ç –º–Ω–æ–≥–æ)

–ö–æ–≥–∞—Ç–æ –¥–æ–±–∞–≤—è—Ç–µ —Ä–µ–¥, –º–æ–∂–µ –¥–∞ –≥–æ –∑–∞–ø–∞–∑–∏—Ç–µ –∫–∞—Ç–æ –Ω–∏–∑, –∫–∞—Ç–æ –≤–µ–∫—Ç–æ—Ä, –∫–∞—Ç–æ –Ω—è–∫–∞–∫–≤–∞ –≤–∞—à–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ -- –∫–∞–∫—Ç–æ –≥–æ –∏–∑–º–∏—Å–ª–∏—Ç–µ. –†–µ–¥–æ–≤–µ—Ç–µ —Å–∞ –≤–∞–∂–Ω–∏, –∑–∞—â–æ—Ç–æ –∫–∞–∫—Ç–æ –≤–∏–∂–¥–∞—Ç–µ, –∏–º–∞ –∫–æ–º–∞–Ω–¥–∞ –∑–∞ —Å–∫–æ–∫ –Ω–∞ —Ä–µ–¥. –ù–µ –µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–∞ —Å–µ *–≤–∫–∞—Ä–≤–∞—Ç* –ø–æ—Ä–µ–¥ -- –∞–∫–æ –Ω–∞–ø–∏—à–µ—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–∞, –≤ –∫–æ—è—Ç–æ –ø—ä—Ä–≤–æ —Å–ª–∞–≥–∞—Ç–µ —Ä–µ–¥ 20, –ø–æ—Å–ª–µ —Ä–µ–¥ 10, —Ç—è —â–µ —Å–µ –∏–∑–ø—ä–ª–Ω–∏ –æ—Ç 10 –∫—ä–º 20. –ú–æ–∂–µ—Ç–µ –¥–∞ –¥–æ–±–∞–≤–∏—Ç–µ —Ä–µ–¥–æ–≤–µ —Å –µ–¥–∏–Ω –∏ —Å—ä—â –Ω–æ–º–µ—Ä, –∫–æ–∏—Ç–æ —â–µ —Å–µ –ø—Ä–µ–∑–∞–ø–∏—à–∞—Ç. –¢–æ–µ—Å—Ç:

```
3 PRINT 1
2 PRINT 2
1 PRINT 3
1 PRINT 4
```

–í—Ç–æ—Ä–∏—è —Ä–µ–¥ 1 —â–µ –ø—Ä–µ–∑–∞–ø–∏—à–µ –ø—ä—Ä–≤–∏—è —Ä–µ–¥ 1, –∏ –ø–æ –≤—Ä–µ–º–µ –Ω–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ, –ø—Ä–æ–≥—Ä–∞–º–∞—Ç–∞ —â–µ —Å–µ –ø—Ä–µ–Ω–∞—Ä–µ–¥–∏. –¢–æ–µ—Å—Ç, –≥–æ—Ä–Ω–∞—Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–∞ –µ –µ–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–∞ –Ω–∞:

```
1 PRINT 4
2 PRINT 2
3 PRINT 1
```

–ö–∞–∫—Ç–æ –∑–∞–±–µ–ª—è–∑–≤–∞—Ç–µ, –Ω–µ –µ –Ω—É–∂–Ω–æ –¥–∞ —Å–∞ –ø—Ä–µ–∑ 10 :). –ü—Ä–∏—á–∏–Ω–∞—Ç–∞ –ø–æ–≤–µ—á–µ—Ç–æ –ø—Ä–∏–º–µ—Ä–∏ –¥–∞ —Å–∞ –ø—Ä–µ–∑ 10 –µ –∑–∞—â–æ—Ç–æ –µ–¥–Ω–æ –≤—Ä–µ–º–µ —Ç–∞–∫–∞ —Å–µ –ø—Ä–∞–≤–µ—à–µ, –∑–∞ –¥–∞ –∏–º–∞ –¥—É–ø–∫–∏ –º–µ–∂–¥—É —Ä–µ–¥–æ–≤–µ—Ç–µ –¥–∞ —Å–ª–æ–∂–∏–º –∫–æ–¥, –∫–æ–π—Ç–æ —Å–º–µ –∑–∞–±—Ä–∞–≤–∏–ª–∏ üòÖ.

## –ò–∑–ø—ä–ª–Ω–µ–Ω–∏–µ –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞—Ç–∞

–°–ª–µ–¥ –∫–∞—Ç–æ —Å–º–µ –¥–æ–±–∞–≤–∏–ª–∏ –≤—Å–∏—á–∫–∏ —Ä–µ–¥–æ–≤–µ –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞—Ç–∞, –≤—Ä–µ–º–µ –µ –¥–∞ —è –∏–∑–ø—ä–ª–Ω–∏–º. –¢—É–∫ —â–µ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ –∑–∞–Ω–∏–º–∞–≤–∞–º–µ —Å –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏ –∏ –≤—Ö–æ–¥ –∏ –∏–∑—Ö–æ–¥. –ü—ä—Ä–≤–æ, –Ω–µ–∫–∞ –¥–∞ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–∞–º–µ –µ–¥–Ω–∞ helper —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—è—Ç–æ –¥–∞ –æ—Ü–µ–Ω–∏ –Ω—è–∫–æ–π –Ω–∏–∑ –∫–∞—Ç–æ —Å—Ç–æ–π–Ω–æ—Å—Ç, –±–∞–∑–∏—Ä–∞–Ω–æ –Ω–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∏ –ø—Ä–∞–≤–∏–ª–∞:

``` rust
// –ù–µ –∑–∞–±—Ä–∞–≤—è–π—Ç–µ lifetime –∞–Ω–æ—Ç–∞—Ü–∏—è—Ç–∞
impl<R: Read, W: Write> Interpreter<R, W> {
    /// –û—Ü–µ–Ω—è–≤–∞ `value` –∫–∞—Ç–æ —Å—Ç–æ–π–Ω–æ—Å—Ç –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –Ω–∞ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞:
    ///
    /// - –ê–∫–æ `value` –µ –Ω–∏–∑, –∫–æ–π—Ç–æ –∑–∞–ø–æ—á–≤–∞ —Å –≥–ª–∞–≤–Ω–∞ –±—É–∫–≤–∞ (—Å—ä–≥–ª–∞—Å–Ω–æ `char::is_uppercase`), —Ç—ä—Ä—Å–∏–º
    ///   –¥–µ—Ñ–∏–Ω–∏—Ä–∞–Ω–∞ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞ —Å —Ç–æ–≤–∞ –∏–º–µ –∏ –≤—Ä—ä—â–∞–º–µ –Ω–µ–π–Ω–∞—Ç–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç.
    ///   -> –ê–∫–æ –Ω—è–º–∞ —Ç–∞–∫–∞–≤–∞, –≤—Ä—ä—â–∞–º–µ `InterpreterError::UnknownVariable` —Å —Ç–æ–≤–∞ –∏–º–µ.
    /// - –ê–∫–æ `value` –µ –≤–∞–ª–∏–¥–Ω–æ u16 —á–∏—Å–ª–æ, –≤—Ä—ä—â–∞–º–µ —á–∏—Å–ª–æ—Ç–æ
    ///   -> –ò–Ω–∞—á–µ, –≤—Ä—ä—â–∞–º–µ `InterpreterError::NotANumber` —Å —Ç–∞–∑–∏ —Å—Ç–æ–π–Ω–æ—Å—Ç
    ///
    pub fn eval_value(&self, value: &str) -> Result<u16, InterpreterError> {
        todo!()
    }
}
```

–ê—Ä–≥—É–º–µ–Ω—Ç–∞ –Ω–∞ `PRINT` —â–µ —Ä–∞–±–æ—Ç–∏ –ø–æ –≥–æ—Ä–Ω–∏—è –Ω–∞—á–∏–Ω, —Å –µ–¥–Ω–∞ –¥–æ–±–∞–≤–∫–∞. –°—Ç–æ–π–Ω–æ—Å—Ç–∏—Ç–µ –≤ —É—Å–ª–æ–≤–∏–µ—Ç–æ –Ω–∞ `IF`-–∫–ª–∞—É–∑–∏—Ç–µ —Å—ä—â–æ —â–µ —Å–µ –æ—Ü–µ–Ω—è–≤–∞—Ç –ø–æ —Ç–æ–∑–∏ –Ω–∞—á–∏–Ω -- —á–∏—Å–ª–æ –∏–ª–∏ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞, –∫–æ—è—Ç–æ –≤–∞–¥–∏ —á–∏—Å–ª–æ.

–ó–∞–ø–∏—Å–≤–∞–Ω–µ—Ç–æ –Ω–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç –Ω–∞ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞ —Å—Ç–∞–≤–∞ —Å –∫–æ–º–∞–Ω–¥–∞—Ç–∞ `READ`, –∫–æ—è—Ç–æ —á–µ—Ç–µ —Å—Ç–æ–π–Ω–æ—Å—Ç—Ç–∞ –æ—Ç `input`. –ê–∫–æ –∑–∞–ø–∏—à–µ–º –≤—Ç–æ—Ä–∏ –ø—ä—Ç —Å—ä—â–∞—Ç–∞ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞, –ø—Ä–æ—Å—Ç–æ —Å–µ –ø—Ä–µ–∑–∞–ø–∏—Å–≤–∞. –ù—è–º–∞ –¥–∞ —Å–∏ –∫—Ä–∏–≤–∏–º –¥—É—à–∞—Ç–∞ -- –ø–µ—Ä—Ñ–µ–∫—Ç–µ–Ω use case –µ –∑–∞ [HashMap](https://doc.rust-lang.org/stable/std/collections/struct.HashMap.html) –∏–ª–∏ [BTreeMap](https://doc.rust-lang.org/stable/std/collections/struct.BTreeMap.html), —Å–º–µ–ª–æ —Å–∏ —Ö–∞—Ä–µ—Å–∞–π—Ç–µ –µ–¥–Ω–∞ –æ—Ç —Ç–µ–∑–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –∑–∞ –¥–∞ —Å–∏ –ø–∞–∑–∏—Ç–µ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏—Ç–µ. –ö–ª—é—á–æ–≤–µ—Ç–µ —â–µ —Å–∞ –Ω–∏–∑–æ–≤–µ, –∞ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏—Ç–µ —â–µ —Å–∞ `u16`. –û—Å–≤–µ–Ω –Ω–∞—á–∞–ª–Ω–∞—Ç–∞ –≥–ª–∞–≤–Ω–∞ –±—É–∫–≤–∞, —â–µ —Ç–µ—Å—Ç–≤–∞–º–µ —Å–∞–º–æ —Å –¥—Ä—É–≥–∏ –±—É–∫–≤–∏ (–º–∞–ª–∫–∏ –∏ –≥–æ–ª–µ–º–∏, –≤–∫–ª—é—á–∏—Ç–µ–ª–Ω–æ –∫–∏—Ä–∏–ª–∏—Ü–∞), —Ç–∞–∫–∞ —á–µ –¥–∞–ª–∏ –∏ –∫–∞–∫–≤–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è —â–µ –ø—Ä–∞–≤–∏—Ç–µ –µ –≤–∞—à–∞ —Ä–∞–±–æ—Ç–∞.

–ï—Ç–æ –∫–∞–∫ –∏–∑–≥–ª–µ–∂–¥–∞ `run` —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞:

``` rust
// –ù–µ –∑–∞–±—Ä–∞–≤—è–π—Ç–µ lifetime –∞–Ω–æ—Ç–∞—Ü–∏—è—Ç–∞
impl<R: Read, W: Write> Interpreter<R, W> {
    /// –§—É–Ω–∫—Ü–∏—è—Ç–∞ –∑–∞–ø–æ—á–≤–∞ –¥–∞ –∏–∑–ø—ä–ª–Ω—è–≤–∞ —Ä–µ–¥–æ–≤–µ—Ç–µ –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞—Ç–∞ –≤ –Ω–∞—Ä–∞—Å—Ç–≤–∞—â —Ä–µ–¥. –ê–∫–æ —Å—Ç–∏–≥–Ω–µ –¥–æ GOTO,
    /// —Å–∫–∞—á–∞ –Ω–∞ —Å—ä–æ—Ç–≤–µ—Ç–Ω–∏—è —Ä–µ–¥ –∏ –ø—Ä–æ–¥—ä–ª–∂–∞–≤–∞ –æ—Ç –Ω–µ–≥–æ –≤ –Ω–∞—Ä–∞—Å—Ç–≤–∞—â —Ä–µ–¥. –ö–æ–≥–∞—Ç–æ –≤–µ—á–µ –Ω—è–º–∞ —Ä–µ–¥ —Å
    /// –ø–æ-–≥–æ–ª—è–º–æ —á–∏—Å–ª–æ, —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞ —Å–≤—ä—Ä—à–≤–∞ –∏ –≤—Ä—ä—â–∞ `Ok(())`.
    ///
    /// –í–∏–∂—Ç–µ –ø–æ-–¥–æ–ª—É –∑–∞ –æ—Ç–¥–µ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥–∏ –∏ –∫–∞–∫–≤–∏ –≥—Ä–µ—à–∫–∏ –º–æ–≥–∞—Ç –¥–∞ –≤—ä—Ä–Ω–∞—Ç.
    ///
    pub fn run(&mut self) -> Result<(), InterpreterError> {
        todo!()
    }
}
```

–ê–∫–æ –≤ –∫–æ–π—Ç–æ –∏ –¥–∞ –µ –º–æ–º–µ–Ω—Ç –æ–ø–µ—Ä–∞—Ü–∏—è –ø–æ —á–µ—Ç–µ–Ω–µ –æ—Ç `input` –∏–ª–∏ –ø–∏—Å–∞–Ω–µ –≤ `output` –≤—ä—Ä–Ω–µ –≥—Ä–µ—à–∫–∞, —Ç–æ–≤–∞ —â–µ –µ `std::io::Error` –∏ –æ—á–∞–∫–≤–∞–º–µ –¥–∞ —è –ø–∞–∫–µ—Ç–∏—Ä–∞—Ç–µ –≤ `InterpreterError::IoError` –∏ –¥–∞ —è –≤—ä—Ä–Ω–µ—Ç–µ. –í–µ—Ä–æ—è—Ç–Ω–æ —â–µ –µ —É–¥–æ–±–Ω–æ –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞—Ç–µ `eval_value`, –Ω–æ –∑–∞–±–µ–ª–µ–∂–µ—Ç–µ, —á–µ –≥—Ä–µ—à–∫–∏—Ç–µ –æ—Ç—Ç–∞–º —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ –ø—Ä–µ–≤–µ–¥–∞—Ç –¥–æ `RuntimeError`.

–í—Å–∏—á–∫–∏ `InterpreterError::RuntimeError` –æ—á–∞–∫–≤–∞–º–µ –≤ `line_number` –¥–∞ —Å—ä–¥—ä—Ä–∂–∞—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—è –Ω–æ–º–µ—Ä –Ω–∞ —Ä–µ–¥, –∫—ä–¥–µ—Ç–æ —Å–µ –µ —Å—á—É–ø–∏–ª–∞ –ø—Ä–æ–≥—Ä–∞–º–∞—Ç–∞, –∏ –∫–∞–∫–≤–æ—Ç–æ —Å—ä–æ–±—â–µ–Ω–∏–µ —Å–∏ –∏—Å–∫–∞—Ç–µ –≤ `message`.

–ï–¥–Ω–∞ –ø–æ –µ–¥–Ω–∞, –∫–∞–∫–≤–æ –ø—Ä–∞–≤–∏ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ—Ç–æ –Ω–∞ 4—Ç–µ –∫–æ–º–∞–Ω–¥–∏:

- `PRINT <—Å—Ç–æ–π–Ω–æ—Å—Ç>`: –∑–∞–ø–∏—Å–≤–∞ –¥–∞–¥–µ–Ω–∞—Ç–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç –∏ –Ω–æ–≤ —Ä–µ–¥ (—Å–∏–º–≤–æ–ª `\n`) –≤ `output`-–∞. –ê–∫–æ
  —Å—Ç–æ–π–Ω–æ—Å—Ç—Ç–∞ –∑–∞–ø–æ—á–≤–∞ —Å –≥–æ–ª—è–º–∞ –±—É–∫–≤–∞ (—Å–ø—Ä—è–º–æ `char::is_uppercase`), —Ç—Ä–µ—Ç–∏—Ä–∞–π—Ç–µ —è –∫–∞—Ç–æ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞ –∏
  –≤—ä—Ä–Ω–µ—Ç–µ `InterpreterError::RuntimeError`, –∞–∫–æ –Ω—è–º–∞ —Ç–∞–∫–∞–≤–∞ –¥–µ—Ñ–∏–Ω–∏—Ä–∞–Ω–∞. –ê–∫–æ —Å—Ç–æ–π–Ω–æ—Å—Ç—Ç–∞ –µ —á–∏—Å–ª–æ,
  –ø—Ä–æ—Å—Ç–æ –≥–æ –Ω–∞–ø–µ—á–∞—Ç–∞–π—Ç–µ, –Ω–æ —Ç—É–∫ –∏–º–∞–º–µ **—Ç—Ä–µ—Ç–∏ —Å–ª—É—á–∞–π** -- –∞–∫–æ –µ –Ω–∏–∑, –∫–æ–π—Ç–æ –∑–∞–ø–æ—á–≤–∞ —Å –º–∞–ª–∫–∞ –±—É–∫–≤–∞,
  –∑–∞–ø–∏—à–µ—Ç–µ –Ω–∏–∑–∞ –≤ `output`. –¢–∞–∫–∞ –º–æ–∂–µ–º –¥–∞ –ø–∏—à–µ–º —á–∏—Å–ª–∞, –∏–¥–≤–∞—â–∏ –æ—Ç –≤—Ö–æ–¥–∞, –Ω–æ —Å—ä—â–æ –∏ –Ω–æ—Ä–º–∞–ª–Ω–∏ –Ω–∏–∑–æ–≤–∏
  —Å—ä–æ–±—â–µ–Ω–∏—è (–±–µ–∑ –¥–∞ –≤–∏ –∫–∞—Ä–∞–º–µ –¥–∞ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–∞—Ç–µ –ø–∞—Ä—Å–µ–Ω–µ –Ω–∞ –∫–∞–≤–∏—á–∫–∏, hope you appreciate it).

- `READ <–∏–º–µ –Ω–∞ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞>`: –ü—Ä–æ—á–∏—Ç–∞ –æ—Ç `input` —Ç–æ—á–Ω–æ –µ–¥–∏–Ω —Ä–µ–¥, –ø—Ä–µ–º–∞—Ö–≤–∞–π–∫–∏ –∑–∞–≤—ä—Ä—à–≤–∞—â–∏—è `\n`.
  –û–ø–∏—Ç–≤–∞ —Å–µ –¥–∞ –ø—Ä–æ—á–µ—Ç–µ `u16` –æ—Ç –Ω–µ–≥–æ, –Ω–æ –∞–∫–æ –Ω–µ —Å—Ä–∞–±–æ—Ç–∏, –æ—á–∞–∫–≤–∞–º–µ `InterpreterError::RuntimeError`.
  –ö–∞–∫—Ç–æ –æ—Ç–±–µ–ª—è–∑–∞—Ö–º–µ –ø–æ-–≥–æ—Ä–µ, —Ç–æ–≤–∞ –∑–∞–ø–∏—Å–≤–∞ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞ —Å –¥–∞–¥–µ–Ω–æ—Ç–æ –∏–º–µ, –∫–∞—Ç–æ —è –ø—Ä–µ–∑–∞–ø–∏—Å–≤–∞, –∞–∫–æ –≤–µ—á–µ
  —Å—ä—â–µ—Å—Ç–≤—É–≤–∞.

- `GOTO <–Ω–æ–º–µ—Ä –Ω–∞ —Ä–µ–¥>`: –ü—Ä–æ–º–µ–Ω—è —Å–ª–µ–¥–≤–∞—â–∏—è —Ä–µ–¥ –∑–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞—Ç–∞ –¥–∞ –±—ä–¥–µ –¥–∞–¥–µ–Ω–∏—è –Ω–æ–º–µ—Ä –Ω–∞
  —Ä–µ–¥. –ê–∫–æ —Ç–∞–∫—ä–≤ –Ω–æ–º–µ—Ä –Ω–∞ —Ä–µ–¥ –Ω–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞, –æ—á–∞–∫–≤–∞–º–µ –¥–∞ –≤—ä—Ä–Ω–µ—Ç–µ `InterpreterError::RuntimeError` —Å
  –Ω–æ–º–µ—Ä–∞ –Ω–∞ —Ä–µ–¥–∞ –Ω–∞ —Å–∞–º–∞—Ç–∞ –∫–æ–º–∞–Ω–¥–∞, –∞ –Ω–µ —Ä–µ–¥–∞, –∫—ä–º –∫–æ–π—Ç–æ —Å–µ —Å–∫–∞—á–∞.

- `IF <—Å—Ç–æ–π–Ω–æ—Å—Ç> <–æ–ø–µ—Ä–∞—Ç–æ—Ä> <—Å—Ç–æ–π–Ω–æ—Å—Ç> GOTO <–Ω–æ–º–µ—Ä –Ω–∞ —Ä–µ–¥>`:
  –ß–∞—Å—Ç—Ç–∞, –∫–æ—è—Ç–æ –≤–∫–ª—é—á–≤–∞ `GOTO <–Ω–æ–º–µ—Ä –Ω–∞ —Ä–µ–¥>` —Ä–∞–±–æ—Ç–∏ –ø–æ –∞–±—Å–æ–ª—é—Ç–Ω–æ —Å—ä—â–∏—è –Ω–∞—á–∏–Ω –∫–∞—Ç–æ –ø–æ-–≥–æ—Ä–µ –æ—Ç–∫—ä–º
  –≥—Ä–µ—à–∫–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç. GOTO-—Ç–æ —Å–µ –∏–∑–ø—ä–ª–Ω—è–≤–∞ (–∏ –≤–∞–ª–∏–¥–∏—Ä–∞ –∑–∞ –≥—Ä–µ—à–∫–∏) —Å–∞–º–æ –∞–∫–æ —É—Å–ª–æ–≤–∏–µ—Ç–æ –Ω–∞
  `IF`-–∫–ª–∞—É–∑–∞—Ç–∞ –µ –∏—Å—Ç–∏–Ω–∞.

  –£—Å–ª–æ–≤–∏–µ—Ç–æ —Å–µ —Å—ä—Å—Ç–æ–∏ –æ—Ç —Ç—Ä–∏ —á–∞—Å—Ç–∏, –¥–≤–µ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ –∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä –º–µ–∂–¥—É —Ç—è—Ö. –û–ø–µ—Ä–∞—Ç–æ—Ä–∏—Ç–µ, –∫–æ–∏—Ç–æ —â–µ
  –ø–æ–¥–∞–≤–∞–º–µ –≤ —Ç–µ—Å—Ç–æ–≤–µ, —â–µ —Å–∞ **—Å–∞–º–æ** —Ç–µ–∑–∏ —Ç—Ä–∏: `<`, `>`, –∏ `=` –∑–∞ —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ.

  –î–≤–µ—Ç–µ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ —Å–µ –æ—Ü–µ–Ω—è–≤–∞—Ç –∫–∞–∫—Ç–æ –µ –æ–±—è—Å–Ω–µ–Ω–æ –≤ `eval_value` -- –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏ —Å –≥–ª–∞–≤–Ω–∞ –±—É–∫–≤–∞ –∏–ª–∏
  `u16` —á–∏—Å–ª–∞. –ö–∞–∫—Ç–æ —É–∫–∞–∑–∞—Ö–º–µ –ø–æ-–≥–æ—Ä–µ, –ø—Ä–µ–≤–µ–∂–¥–∞—Ç–µ –≤—Å—è–∫–∞–∫–≤–∏ –≥—Ä–µ—à–∫–∏ –¥–æ `RuntimeError`. –¢–æ–µ—Å—Ç, –≤–∞–ª–∏–¥–Ω–∏
  `IF`-–∫–ª–∞—É–∑–∏ –º–æ–≥–∞—Ç –¥–∞ —Å–∞, –ø—Ä–∏–º–µ—Ä–Ω–æ:
    - `IF 2 > 1 GOTO 13` -- —Å–∫–∞—á–∞ –Ω–∞ —Ä–µ–¥ 13
    - `IF 2 < 1 GOTO 31` -- –Ω–µ —Å–∫–∞—á–∞ –Ω–∞ –ø–æ–¥–∞–¥–µ–Ω–∏—è —Ä–µ–¥, –ø—Ä–æ–¥—ä–ª–∂–∞–≤–∞ —Å–∏ –Ω–∞ —Å–ª–µ–¥–≤–∞—â–∏—è
    - `IF 3 = 3 GOTO 33` -- —Å–∫–∞—á–∞ –Ω–∞ —Ä–µ–¥ 33

–í —Ç–µ—Å—Ç–æ–≤–µ—Ç–µ —â–µ –≤–∏–∫–∞–º–µ `run` —Å–∞–º–æ –ø–æ –≤–µ–¥–Ω—ä–∂ –Ω–∞ –≤—Å–µ–∫–∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä (–º–∞–∫–∞—Ä —á–µ –∑–∞ —Ü–µ–ª–∏—Ç–µ –Ω–∞ —Ç–µ—Å—Ç–∞, —â–µ –≤–∏–∫–∞–º–µ `eval_value` —Å–ª–µ–¥ `run`), —Ç–∞–∫–∞ —á–µ –µ –≤–∞—à –∏–∑–±–æ—Ä –∫–∞–∫–≤–æ –¥–∞ —Å–µ —Å–ª—É—á–∏ –∞–∫–æ —Å–µ –∏–∑–≤–∏–∫–∞ –≤—Ç–æ—Ä–∏ –ø—ä—Ç -- –º–æ–∂–µ –¥–∞ —Å–µ –∑–∞–Ω—É–ª—è—Ç –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏—Ç–µ –∏ –¥–∞ —Å–µ –ø–æ—á–Ω–µ –æ—Ç–Ω–∞—á–∞–ª–æ, –º–æ–∂–µ –¥–∞ —Å–µ resume-–Ω–µ –æ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏—è —Ä–µ–¥, –∫–æ–π—Ç–æ —Å–µ –µ —Å—á—É–ø–∏–ª, –Ω–∏–µ –Ω—è–º–∞ –¥–∞ –ø—Ä–æ–≤–µ—Ä—è–≤–∞–º–µ —Ç–æ–∑–∏ case.

(Hint: –ü—Ä–µ–¥–≤–∏–¥, —á–µ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ –≤—Ä—ä—â–∞—Ç–µ `RuntimeError`, –º–æ–∂–µ –±–∏ —Å–∏ –∑–∞—Å–ª—É–∂–∞–≤–∞ –¥–∞ —Å–∏ –Ω–∞–ø—Ä–∞–≤–∏—Ç–µ –Ω—è–∫–∞–∫–≤–æ –ø–æ–º–æ—â–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤–æ –∑–∞ –¥–∞ –≥–∏ –∏–Ω—Å—Ç–∞–Ω—Ü–∏—Ä–∞—Ç–µ –ª–µ—Å–Ω–æ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –Ω–∞ `run`.)

–ê–∫–æ –Ω—è–º–∞ –ø—Ä–æ–≥—Ä–∞–º–∞ –∑–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ, —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞ `run` –ø—Ä–æ—Å—Ç–æ –Ω–µ –ø—Ä–∞–≤–∏ –Ω–∏—â–æ –∏ –≤—Ä—ä—â–∞ —É—Å–ø–µ—à–µ–Ω —Ä–µ–∑—É–ª—Ç–∞—Ç.

## –î–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∏ –±–µ–ª–µ–∂–∫–∏

–ê–∫–æ –≤–∏ –∏–∑–≥–ª–µ–∂–¥–∞ –∫–∞—Ç–æ —Ç–≤—ä—Ä–¥–µ –º–Ω–æ–≥–æ —Ä–∞–±–æ—Ç–∞, –º–∏—Å–ª—è —á–µ —â–µ —Å–µ –∏–∑–Ω–µ–Ω–∞–¥–∞—Ç–µ -- –ø—Ä–æ—Å—Ç–æ –∫–∞—Ä–∞–π—Ç–µ –∫–æ–º–∞–Ω–¥–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞, –ø–∏—à–µ—Ç–µ —Å–∏ –ø–æ –Ω—è–∫–æ–π –∏ –¥—Ä—É–≥ —Ç–µ—Å—Ç –æ—Ç –ø—Ä–∏–º–µ—Ä–∏—Ç–µ, –∫–æ–∏—Ç–æ –≤–∏ –¥–∞–¥–æ—Ö–º–µ, –∏ —â–µ —Å–µ –æ–ø—Ä–∞–≤–∏—Ç–µ. –°–ø–æ–∫–æ–π–Ω–æ –º–æ–∂–µ—Ç–µ –¥–∞ —Å–∏ –Ω–∞–ø—Ä–∞–≤–∏—Ç–µ —á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ—à–µ–Ω–∏–µ –∫–∞—Ç–æ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–∞—Ç–µ —Å–∞–º–æ `PRINT` –∏ –≤ –¥—Ä—É–≥–∏ —Å–ª—É—á–∞–∏ –æ—Å—Ç–∞–≤–∏—Ç–µ `todo!()`, –ø–æ—Å–ª–µ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–∞—Ç–µ `READ` –∏ —Ç.–Ω..

–ò—Å–∫–∞—Ç–µ –¥–∞ —Å–∏ —Ç–µ—Å—Ç–≤–∞—Ç–µ –∏–≥—Ä–∞—Ç–∞ –æ—Ç –ø–æ-–≥–æ—Ä–µ —Å –∏—Å—Ç–∏–Ω—Å–∫–∏ –≤—Ö–æ–¥ –∏ –∏–∑—Ö–æ–¥?

``` rust
let stdin = std::io::stdin();
let mut stdout = std::io::stdout();

let mut interpreter = Interpreter::new(stdin, &mut stdout);
interpreter.add("10 PRINT guess_a_number").unwrap();
// interpreter.add(...
interpreter.run().unwrap();
```

–ò–Ω–∞—á–µ, –∞–∫–æ –≤–∏ –µ –ª—é–±–æ–ø–∏—Ç–Ω–æ –¥–∞ –≤–∏–¥–∏—Ç–µ –∫–∞–∫ –∏–∑–≥–ª–µ–∂–¥–∞ –ø—ä–ª–µ–Ω –≤–∞—Ä–∏–∞–Ω—Ç –Ω–∞ –µ–∑–∏–∫–∞, –º–æ–∂–µ –¥–∞ —Ü—ä–∫–Ω–µ—Ç–µ –Ω–∞ —Ç–µ–∑–∏ –ª–∏–Ω–∫–æ–≤–µ:

- Live-coding –Ω–∞ –∑–º–∏—è: <https://www.youtube.com/watch?v=7r83N3c2kPw>
- –ö–Ω–∏–≥–∏ –∑–∞ –ü—Ä–∞–≤–µ—Ü (–ø—Ä–µ–ø–æ—Ä—ä—á–≤–∞–º "–†–∞–±–æ—Ç–∞ —Å –ø–µ—Ä—Å–æ–Ω–∞–ª–µ–Ω –∫–æ–º–ø—é—Ç—ä—Ä"): <http://pravetz.info/books.html>
- Wordle –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ BASIC: <https://twitter.com/katie_panda/status/1496607013589204998>

–ù–∞—à–∏—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä –Ω–µ –µ –±–∞—à –∫–∞—Ç–æ —Ç–µ–∑–∏, —Ç–∞–∫–∞ —á–µ –Ω–µ –ø—Ä–∏–µ–º–∞–π—Ç–µ –æ—Ñ–∏—Ü–∏–∞–ª–Ω–∞—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ Applesoft Basic –∫–∞—Ç–æ –∫–∞–Ω–æ–Ω–∏—á–Ω–∞ –∑–∞ –¥–æ–º–∞—à–Ω–æ—Ç–æ -- —Å–ª–µ–¥–≤–∞–π—Ç–µ —Å–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏—Ç–µ –ø–æ-–≥–æ—Ä–µ.
